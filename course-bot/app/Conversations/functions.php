<?php



function returnCourseDetails()
{
    return $courseDetails[] = array(
        'Dynamics 365' => array(
            array(
                "MB 400",
                "Microsoft Power Apps + Dynamics 365 Developer",
                "Dynamics 365",
                "Associate",
                array("Configure business process automation", "10-15%", "
          Configure Common Data Service", "15-20%", "
          Create a technical design	", "10-15%", "
          Create and configure Power Apps", "10-15%", "
          Develop integrations", "10-15%", "
          Extend the platform", "15-20%", "
          Extend the user experience", "15-20%")
            ),
            array(
                "MB 200",
                "Microsoft Power Platform + Dynamics 365 Core",
                "Dynamics 365",
                "Associate",
                array("Perform discovery, planning, and analysis", "5-10%", "
          Manage user experience design	20-25%", "
          Manage entities and data", "15-20%", "
          Implement security", "5-10%", "
          Implement integration", "15-20%", "
          Perform solutions deployment and testing", "25-30%")
            ),
            array(
                "MB 600",
                "Microsoft Certified: Power Apps + Dynamics 365 Solution Architect Expert",
                "Dynamics 365",
                "Expert",
            ),
            array(
                "MB 910",
                "Microsoft Dynamics 365 Fundamentals Customer Engagement Apps (CRM) (beta)",
                "Dynamics 365",
                "Associate",
                array("Deploy and consume models", "20-25%", "
          Optimize and manage models", "20-25%", "
          Run experiments and train models", "25-30%", "
          Set up an Azure Machine Learning Workspace", "30-35%")
            ),
            array(
                "MB 920",
                "Microsoft Dynamics 365 Fundamentals Finance and Operations Apps (ERP) (beta)",
                "Dynamics 365",
                "Associate",
            ),
            array(
                "MB 901",
                "Microsoft Dynamics 365 Fundamentals",
                "Dynamics 365",
                "Foundational",
            ),
            array(
                "MB 210",
                "Microsoft Dynamics 365 Sales",
                "Dynamics 365",
                "Associate",
            ),
            array(
                "MB 230",
                "Microsoft Dynamics 365 Customer Service",
                "Dynamics 365",
                "Associate",
            ),
            array(
                "MB 500",
                "Microsoft Dynamics 365: Finance and Operations Apps Developer",
                "Dynamics 365",
                "Associate",
            ),
            array(
                "MB 220",
                "Microsoft Dynamics 365 Marketing",
                "Dynamics 365",
                "Associate",
            ),
            array(
                "MB 240",
                "Microsoft Dynamics 365 Field Service",
                "Dynamics 365",
                "Associate",
            ),
            array(
                "MB 700",
                "Microsoft Dynamics 365: Finance and Operations Apps Solution Architect (beta)",
                "Dynamics 365",
                "Expert",
            ),
            array(
                "MB 330",
                "Microsoft Dynamics 365 Supply Chain Management",
                "Dynamics 365",
                "Associate",
            ),
            array(
                "MB 300",
                "Microsoft Dynamics 365: Core Finance and Operations",
                "Dynamics 365",
                "Associate",
            ),
            array(
                "MB 310",
                "Microsoft Dynamics 365 Finance",
                "Dynamics 365",
                "Associate",
            ),
            array(
                "MB 320",
                "Microsoft Dynamics 365 Supply Chain Management, Manufacturing",
                "Dynamics 365",
                "Associate",
            )
        ),
        'Microsoft 365' => array(
            array(
                "MS 202",
                "Microsoft 365 Messaging Administrator Certification Transition",
                "Microsoft 365",
                "Associate",
            ),
            array(
                "MS 300",
                "Deploying Microsoft 365 Teamwork",
                "Microsoft 365",
                "Associate",
            ),
            array(
                "77 731",
                "Outlook 2016: Core Communication, Collaboration and Email Skills",
                "Microsoft 365",
                "Associate",
            ),
            array(
                "70 334",
                "Core Solutions of Microsoft Skype for Business 2015",
                "Microsoft 365",
                "Expert",
            ),
            array(
                "MS 302",
                "Microsoft 365 Teamwork Administrator Certification Transition",
                "Microsoft 365",
                "Associate",
            ),
            array(
                "70 333",
                "Deploying Enterprise Voice with Skype for Business 2015",
                "Microsoft 365",
                "Expert",
            ),
            array(
                "MS 201",
                "Implementing a Hybrid and Secure Messaging Platform",
                "Microsoft 365",
                "Associate",
            ),
            array(
                "70 339",
                "Managing Microsoft SharePoint Server 2016",
                "Microsoft 365",
                "Associate",
            ),
            array(
                "70 345",
                "Designing and Deploying Microsoft Exchange Server 2016",
                "Microsoft 365",
                "Expert",
            ),
            array(
                "MS 200",
                "Planning and Configuring a Messaging Platform",
                "Microsoft 365",
                "Associate",
            ),
            array(
                "MS 301",
                "Deploying SharePoint Server Hybrid",
                "Microsoft 365",
                "Associate",
            ),
            array(
                "MS 600",
                "Microsoft 365 Certified: Developer Associate",
                "Microsoft 365",
                "Associate",
            ),
            array(
                "MD 101",
                "Managing Modern Desktops",
                "Microsoft 365",
                "Associate",
            ),
            array(
                "MS 100",
                "Microsoft 365 Identity and Services",
                "Microsoft 365",
                "Expert",
            ),
            array(
                "MS 101",
                "Microsoft 365 Mobility and Security",
                "Microsoft 365",
                "Expert",
            ),
            array(
                "MD 100",
                "Windows 10",
                "Microsoft 365",
                "Associate",
            ),
            array(
                "MS 203",
                "Microsoft 365 Messaging",
                "Microsoft 365",
                "Associate",
            ),
            array(
                "MS 900",
                "Microsoft 365 Fundamentals",
                "Microsoft 365",
                "Foundational",
            ),
            array(
                "MS 700",
                "Managing Microsoft Teams",
                "Microsoft 365",
                "Associate",
            )
        ),
        "Azure" => array(
            array(
                "AZ 300",
                "Microsoft Azure Architect Technologies",
                "Azure",
                "Expert",
            ),
            array(
                "AZ 203",
                "Developing Solutions for Microsoft Azure",
                "Azure",
                "Associate",
            ),
            array(
                "AZ 103",
                "Microsoft Azure Administrator",
                "Azure",
                "Associate",
            ),
            array(
                "AZ 301",
                "Microsoft Azure Architect Design",
                "Azure",
                "Expert",
            ),
            array(
                "AZ 202",
                "Microsoft Azure Developer Certification Transition",
                "Azure",
                "Associate",
            ),
            array(
                "62 193",
                "Technology Literacy for Educators",
                "Azure",
                "Foundational",
            ),
            array(
                "AZ 102",
                "Microsoft Azure Administrator Certification Transition",
                "Azure",
                "Associate",
            ),
            array(
                "AZ 302",
                "Microsoft Azure Solutions Architect Certification Transition",
                "Azure",
                "Expert",
            ),
            array(
                "AZ 100",
                "Microsoft Azure Infrastructure and Deployment",
                "Azure",
                "Associate",
            ),
            array(
                "Microsoft Azure Developer Advanced Solutions (beta)",
                "Azure",
                "Foundational"
            ),
            array(
                "AZ 101",
                "Microsoft Azure Integration and Security",
                "Azure",
                "Associate",
            ),
            array(
                "AZ 200",
                "Microsoft Azure Developer Core Solutions (beta)",
                "Azure",
                "Foundational",
            ),
            array(
                "DP 300",
                "Administering Relational Databases on Microsoft Azure (beta)",
                "Azure",
                "Associate",
            ),
            array(
                "AI 102",
                "Designing and Implementing a Microsoft Azure AI Solution (beta)",
                "Azure",
                "Associate",
            ),
            array(
                "AZ 140",
                "Configuring and Operating Windows Virtual Desktop on Microsoft Azure (beta)",
                "Azure",
                "Associate",
            ),
            array(
                "AZ 600",
                "Configuring and Operating a Hybrid Cloud with Microsoft Azure Stack Hub (beta)",
                "Azure",
                "Associate",
            ),
            array(
                "DP 203",
                "Data Engineering on Microsoft Azure (beta)",
                "Azure",
                "Associate",
            ),
            array(
                "AZ 900",
                "Microsoft Azure Fundamentals - (Updated with new MOC)",
                "Azure",
                "Foundational",
            ),
            array(
                "AZ 120",
                "Planning & Administering Azure for SAP Workloads",
                "Azure",
                "Expert"
            ),
            array(
                "AI 100",
                "Designing and Implementing an Azure AI Solution",
                "Azure",
                "Associate",
            ),
            array(
                "DP 100",
                "Designing and Implementing a Data Science Solution on Azure",
                "Azure",
                "Associate",
            ),
            array(
                "DP 200",
                "Implementing an Azure Data Solution",
                "Azure",
                "Associate",
            ),
            array(
                "DP 201",
                "Designing an Azure Data Solution",
                "Azure",
                "Associate",
            ),
            array(
                "AZ 204",
                "Developing Solutions for Microsoft Azure (Beta)",
                "Azure",
                "Associate",
            ),
            array(
                "AZ 400",
                "Microsoft Azure DevOps Solutions",
                "Azure",
                "Expert",
            ),
            array(
                "AZ 220",
                "Microsoft Azure IoT Developer",
                "Azure",
                "Associate",
            ),
            array(
                "AZ 303",
                "Microsoft Azure Architect Technologies",
                "Azure",
                "Expert",
            ),
            array(
                "AZ 104",
                "Microsoft Azure Administrator (beta)",
                "Azure",
                "Associate",
            ),
            array(
                "AZ 304",
                "Microsoft Azure Architect Design (beta)",
                "Azure",
                "Expert",
            ),
            array(
                "AI 900",
                "Microsoft Azure AI Fundamentals",
                "Azure",
                "Foundational",
            ),
            array(
                "DP 900",
                "Microsoft Azure Data Fundamentals",
                "Azure",
                "Foundational",
            )
        ),
        'Power Platform' => array(
            array(
                "PL 600",
                "Microsoft Power Platform Solution Architect (beta)",
                "Power Platform",
                "Associate",
            ),
            array(
                "PL 900",
                "Microsoft Power Platform Fundamentals",
                "Power Platform",
                "Foundational",
            ),
            array(
                "DA 100",
                "Analyzing Data with Microsoft Power BI ",
                "Power Platform",
                "Associate",
            ),
            array(
                "PL 100",
                "Microsoft Power Platform App Maker (beta)",
                "Power Platform",
                "Associate",
            ),
            array(
                "PL 200",
                "Microsoft Power Platform Functional Consultant (beta)",
                "Power Platform",
                "Associate",
            ),
            array(
                "PL 400",
                "Microsoft Power Platform Developer (beta)",
                "Power Platform",
                "Associate",
            )
        ),
        'Security' => array(
            array(
                "SC 200",
                "Microsoft Security Operations Analyst (beta)",
                "Security",
                "Associate",
            ),
            array(
                "SC 300",
                "Microsoft Identity and Access Administrator (beta)",
                "Security",
                "Associate",
            ),
            array(
                "SC 400",
                "Microsoft Information Protection Administrator (beta)",
                "Security",
                "Associate",
            ),
            array(
                "SC 900",
                "Microsoft Security Compliance and Identity Fundamentals (beta)",
                "Security",
                "Foundational",
            ),
            array(
                "AZ 500",
                "Microsoft Azure Security Technologies",
                "Security",
                "Associate",
            ),
            array(
                "MS 500",
                "Microsoft 365 Security Administration",
                "Security",
                "Associate",
            )
        ),
        'AWS' => array(
            array(
                "SOA-C01",
                "AWS Certified SysOps Administrator",
                "AWS",
                "Associate"
            )
        ),

        'GCP' => array(
            array(
                "PCA",
                "Professional Cloud Architect",
                "GCP",
                "Professional",
            )
        )


    );
}

function allCourseMapper($query)
{
    $courseDetails = returnCourseDetails();
    if (strpos($query, 'dynamics 365') !== false) {
        return $courseDetails['Dynamics 365'];
    } else if (strpos($query, 'microsoft 365') !== false) {
        return $courseDetails['Microsoft 365'];
    } else if (strpos($query, "azure") !== false) {
        return $courseDetails["Azure"];
    } else if (strpos($query, 'power platform') !== false) {
        return $courseDetails['Power Platform'];
    } else if (strpos($query, 'security') !== false) {
        return $courseDetails['Security'];
    } else if (strpos($query, 'aws') !== false) {
        return $courseDetails['AWS'];
    } else if (strpos($query, 'gcp') !== false) {
        return $courseDetails['GCP'];
    }
}

function findCoursesBasedOnDifficulty($query)
{
    $arr = array();
    $courseDetails = returnCourseDetails();
    foreach ($courseDetails as $topic) {
        foreach ($topic as $course) {
            $q =getDifficultyFromQuery($query);
            $i = 0;
            foreach ($course as $c) {
                if ($i == 0) {
                    $id = $c;
                }
                $i += 1;
                if (strcmp($q, strtolower($c)) == 0) {
                    array_push($arr, $id);
                }
            }
        }
    }
    return $arr;
}
function getCourseIdFromQuery($query){
    $query_arr = explode(" ", $query);
    $ids = ['mb','pca', 'soa-c01', 'az', 'ms', 'sc','pl','da','ai','dp','62','70','md'];
    $flag=0;
    $temp = '';
    foreach ($query_arr as $str) {
        if($flag==1){
            return $temp." ".$str;
        }
        if(in_array(strtolower($str), $ids)){
            $flag=1;
            $temp = $str;
        }
    }
}
function getDifficultyFromQuery($query){
    $query_arr = explode(" ", $query);
    $diffs = ['associate','foundational','expert'];
    foreach ($query_arr as $str) {
        if(in_array(strtolower($str), $diffs)){
            return $str;
        }
    }
}
function findCoursesBasedOnId($query)
{
    $courseDetails = returnCourseDetails();
    foreach ($courseDetails as $topic) {
        foreach ($topic as $course) {
            $i = 0;
            foreach ($course as $c) {
                $i += 1;
                $courseId = getCourseIdFromQuery($query);
                if (strcmp($courseId, strtolower($c)) == 0) {
                    return $course;
                }
            }
        }
    }
}

function findSkillsBasedOnId($query)
{
    $courseDetails = returnCourseDetails();
    foreach ($courseDetails as $topic) {
        foreach ($topic as $course) {
            $flag = 0;
            $i = 0;
            foreach ($course as $c) {
                if($flag==1 && $i==4){
                    return $c;
                }
                $courseId = getCourseIdFromQuery($query);
                if (strcmp($courseId, strtolower($c)) == 0) {
                    $flag = 1;
                }
                $i+=1;
            }
            
        }
    }
}
